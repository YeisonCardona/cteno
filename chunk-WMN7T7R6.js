import{c as P}from"./chunk-NQY4IIVY.js";import{a as L,b as O,c as E,d as D}from"./chunk-NSFBI6CE.js";import{k as R}from"./chunk-6FCW6PRT.js";import{b as w,c as S}from"./chunk-63RWRTVN.js";import{b as _}from"./chunk-GKTD2TDN.js";import{Ba as p,Ga as g,Ib as f,Lb as v,Nb as C,Ob as b,Pb as I,Qb as r,Rb as a,cc as M,db as o,g as m,h as u,i as c,oc as T,qc as y,sc as x,tb as d,yb as h}from"./chunk-TR6HYK2P.js";function k(l,e){if(l&1&&(r(0,"mat-icon",3,0),y(2),a()),l&2){let t=e.$implicit,i=M();T("visible",i.showIcon()[t.class]),f("cue-key",i.fixClass(t.class)),o(2),x("",t.value," ")}}var s=class s extends E{showIcon=p(Object.fromEntries(this.cues().map(e=>[e.class,!1])));fullWindowLink="/paradigms/p300/three-stimuls/stimuli";normalWindowLink="/paradigms/p300/three-stimuls";startCountdownValue=5;allowModes=["sequential"];ngOnInit(){return c(this,null,function*(){u(s.prototype,this,"ngOnInit").call(this),yield this.hardwareService.writeLine("CMD=@CLA;"),yield this.hardwareService.writeLine('CMD=@TITLE TEXT="Three Stimulus P300" COLOR=BLUE SIZE=3;')})}generateCues(){this.cues.set([{class:"Target",value:"star"},{class:"NonTarget",value:"square"},{class:"Novel",value:"fertile"}])}generateTrials(){let e=[],t=Math.floor(this.experimentConfig.target_probability*this.experimentConfig.total_trials/100),i=Math.floor(this.experimentConfig.novel_probability*this.experimentConfig.total_trials/100);for(let n=0;n<t;n++)e.push({class:"Target",duration:this.experimentConfig.stimulus_duration,soa:this.randomIntInRange(this.experimentConfig.soa)});for(let n=e.length;n<i;n++)e.push({class:"Novel",duration:this.experimentConfig.stimulus_duration,soa:this.randomIntInRange(this.experimentConfig.soa)});for(let n=e.length;n<this.experimentConfig.total_trials;n++)e.push({class:"NonTarget",duration:this.experimentConfig.stimulus_duration,soa:this.randomIntInRange(this.experimentConfig.soa)});return e=this.shuffle(e),e}showTrial(e){this.propagateClassMarker(e),this.showIcon.set(Object.fromEntries(this.cues().map(t=>[t.class,t.class===e])))}stopStimuliSequence(){this.showTrial(null)}static \u0275fac=(()=>{let e;return function(i){return(e||(e=g(s)))(i||s)}})();static \u0275cmp=d({type:s,selectors:[["app-stimuli"]],features:[h],decls:3,vars:1,consts:[["cueElement",""],[3,"hostRef"],[1,"center","cue","conditional-visible",3,"visible"],[1,"center","cue","conditional-visible"]],template:function(t,i){t&1&&(r(0,"app-stimuli-layout",1),C(1,k,3,4,"mat-icon",2,v),a()),t&2&&(I("hostRef",i),o(),b(i.cues()))},dependencies:[S,w,L,_,P,R,D],styles:[".cue[_ngcontent-%COMP%]{color:var(--mat-sys-primary);width:1em;height:1em;font-size:20vh}.conditional-visible[_ngcontent-%COMP%]{opacity:0;visibility:hidden;pointer-events:none}.conditional-visible.visible[_ngcontent-%COMP%]{opacity:1;visibility:visible;pointer-events:auto}"]})};m([O("TRIAL",{arguments:["CLASS"],example:"Trial Target",description:"Highlights the specified class by activating its visual icon while deactivating all others. Useful for indicating the target class during a trial or cue presentation."})],s.prototype,"showTrial",1);var N=s;export{N as a};
