import{a as E,b as m,c as L,d as _}from"./chunk-3AMJ5RIH.js";import{c as T}from"./chunk-63RWRTVN.js";import{b as O}from"./chunk-GKTD2TDN.js";import{Ba as d,Ga as f,Ib as v,Lb as y,Nb as C,Ob as b,Pb as I,Qb as o,Rb as l,cc as x,db as r,g as a,h as u,i as p,oc as w,qc as M,rc as S,tb as g,yb as h}from"./chunk-TR6HYK2P.js";function k(c,e){if(c&1&&(o(0,"span",3,0),M(2),l()),c&2){let i=e.$implicit,t=x();w("visible",t.showIcon()[i.class]),v("cue-key",t.fixClass(i.class)),r(2),S(i.value)}}var s=class s extends L{intentionalCues=[];showIcon=d(Object.fromEntries(this.cues().map(e=>[e.class,!1])));fullWindowLink="/paradigms/motor-imagery/sequential/stimuli";normalWindowLink="/paradigms/motor-imagery/sequential";startCountdownValue=5;ngOnInit(){return p(this,null,function*(){u(s.prototype,this,"ngOnInit").call(this),yield this.hardwareService.writeLine("CMD=@CLA;"),yield this.hardwareService.writeLine('CMD=@TITLE TEXT="Sequential Motor Imagery" COLOR=BLUE SIZE=3;')})}generateCues(){this.cues.set(Object.keys(this.stimulusCommandMap).map(e=>({class:e,value:e,keys:this.stimulusCommandMap[e]})))}generateTrials(){let e=[];for(let i of this.experimentConfig.classes)for(let t=0;t<this.experimentConfig.trials_per_class;t++)e.push([{class:i.split("-")[0].trim(),duration:this.experimentConfig.stimulus_duration,soa:0},{class:i.split("-")[1].trim(),duration:this.experimentConfig.stimulus_duration,soa:this.randomIntInRange(this.experimentConfig.soa)}]);return e=this.shuffle(e),e.flat()}showTrial(e){this.propagateClassMarker(e);let i;e!==null?i=e.split("-").map(n=>n.trim())[0]:i=null,this.showIcon.set(Object.fromEntries(this.cues().map(t=>[t.class,t.class===i])))}setOpacity(e,i){let t=this.cuesIconElement.find(n=>n._elementRef.nativeElement.getAttribute("cue-key")===this.fixClass(e));t&&(t._elementRef.nativeElement.style.opacity=i.toString())}stopStimuliSequence(){this.showTrial(null)}static \u0275fac=(()=>{let e;return function(t){return(e||(e=f(s)))(t||s)}})();static \u0275cmp=g({type:s,selectors:[["app-stimuli"]],features:[h],decls:3,vars:1,consts:[["cueElement",""],[3,"hostRef"],[1,"center","cue","conditional-visible",3,"visible"],[1,"center","cue","conditional-visible"]],template:function(i,t){i&1&&(o(0,"app-stimuli-layout",1),C(1,k,3,4,"span",2,y),l()),i&2&&(I("hostRef",t),r(),b(t.cues()))},dependencies:[T,E,O,_],styles:['.cue[_ngcontent-%COMP%]{color:var(--mat-sys-primary);width:100%;height:1em;font-family:"monospace"!important;text-align:center;text-transform:uppercase;letter-spacing:.1em;font-size:10vh}.conditional-visible[_ngcontent-%COMP%]{opacity:0;visibility:hidden;transition:opacity .1s ease,visibility .1s ease}.conditional-visible.visible[_ngcontent-%COMP%]{opacity:1;visibility:visible}']})};a([m("TRIAL",{arguments:["CLASS"],example:"Trial Grasp",description:"Highlights the specified class by activating its visual icon while deactivating all others. Useful for indicating the target class during a trial or cue presentation."})],s.prototype,"showTrial",1),a([m("OPACITY",{arguments:["CLASS","VALUE"],example:"OPACITY Pull 0.5",description:"Sets the visual opacity of the specified class element. The value should range between 0.0 (fully transparent) and 1.0 (fully opaque)."})],s.prototype,"setOpacity",1);var P=s;export{P as a};
